CREATE TABLE Orders (
    order_id INT IDENTITY(1,1) PRIMARY KEY,
    order_code NVARCHAR(50) UNIQUE NOT NULL,
    user_id INT NOT NULL,
    total_price DECIMAL(10,2) NOT NULL,
    discount DECIMAL(10,2) DEFAULT 0,
    coupon_code NVARCHAR(50) NULL,

    vat_amount DECIMAL(10,2) NOT NULL DEFAULT 0,
    shipping_fee DECIMAL(10,2) NOT NULL DEFAULT 0,

    message NVARCHAR(MAX) NULL,   -- üëà l·ªùi nh·∫Øn c·ªßa kh√°ch

    status NVARCHAR(30) DEFAULT 'Pending'
        CHECK (status IN ('Pending','Paid','Cancelled','Shipping','Completed')),
    description NVARCHAR(MAX) NULL,
    delivery_date DATE NOT NULL,
    delivery_time TIME NULL,
    created_at DATETIME DEFAULT GETDATE(),
    updated_at DATETIME DEFAULT GETDATE()
);




CREATE TABLE OrderItems (
    order_item_id INT IDENTITY(1,1) PRIMARY KEY, 
    order_id INT NOT NULL,       -- B·∫ÆT BU·ªòC
    bouquet_id VARCHAR(50),
    bouquet_name VARCHAR(255)

    quantity INT DEFAULT 1,
    price DECIMAL(10,2),
    created_at DATETIME DEFAULT GETDATE(),
    updated_at DATETIME DEFAULT GETDATE(),

    FOREIGN KEY (order_id) REFERENCES Orders(order_id)
        ON DELETE CASCADE         
        ON UPDATE CASCADE
);
