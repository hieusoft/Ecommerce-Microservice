@model dynamic
@{
    Layout = "_Layout.cshtml";
}

<div class="content-box">

    <div class="verification-box">
        <p style="font-size:16px; color:#5a4a42;">
            Hello <strong style="color:#D4A017;">@Model.UserName</strong>,<br><br>
            Thank you for your order! Your payment has been successfully processed.
        </p>
    </div>

    <div class="instructions" style="margin-top:20px; padding:20px; background:#FFFDF5; border-radius:10px; border:1px solid #FFECB3;">

        <h3 style="color:#C17900; margin-bottom:10px;">Order Information</h3>

        <p><strong>Order Code:</strong> @Model.OrderCode</p>
        <p><strong>Order Status:</strong> @Model.Status</p>
        <p>
            <strong>Delivery Date:</strong> @(Model.DeliveryDate?.ToString("dd/MM/yyyy") ?? "N/A")
            <strong>at</strong> @(Model.DeliveryTime?.ToString("HH:mm") ?? "N/A")
        </p>
        <p><strong>Message:</strong> @Model.Message</p>

        <h4 style="color:#C17900; margin-top:15px;">Items</h4>
        <table style="width:100%; border-collapse:collapse; margin-top:10px;">
            <thead>
                <tr style="background:#FFECB3; color:#5D4037; text-align:left;">
                    <th style="padding:8px; border-bottom:1px solid #FFECB3;">Product</th>
                    <th style="padding:8px; border-bottom:1px solid #FFECB3;">Quantity</th>
                    <th style="padding:8px; border-bottom:1px solid #FFECB3;">Price</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.Items != null)
                {
                    foreach (var item in Model.Items)
                    {
                        <tr>
                            <td style="padding:8px; border-bottom:1px solid #FFECB3;">@item.BouquetName</td>
                            <td style="padding:8px; border-bottom:1px solid #FFECB3;">@item.Quantity</td>
                            <td style="padding:8px; border-bottom:1px solid #FFECB3;">$@item.Price.ToString("N2")</td>
                        </tr>
                    }
                }
            </tbody>
        </table>

        <h4 style="color:#C17900; margin-top:15px;">Payment Summary</h4>

        <p><strong>Total Price (original):</strong> $@((Model.TotalPrice - (Model.VatAmount ?? 0) - (Model.ShippingFee ?? 0) + (Model.Discount ?? 0)).ToString("N2"))</p>
        <p><strong>Discount:</strong> $@((Model.Discount ?? 0).ToString("N2"))</p>
        <p><strong>Coupon Code:</strong> @(Model.CouponCode ?? "N/A")</p>
        <p><strong>VAT:</strong> $@((Model.VatAmount ?? 0).ToString("N2"))</p>
        <p><strong>Shipping Fee:</strong> $@((Model.ShippingFee ?? 0).ToString("N2"))</p>

        <p style="font-weight:700; color:#D4A017;">
            <strong>Grand Total:</strong> $@(Model.TotalPrice.ToString("N2"))
        </p>


        @if (!string.IsNullOrEmpty(Model.Description))
        {
            <p><strong>Note:</strong> @Model.Description</p>
        }

    </div>

    <p style="margin-top:20px; padding-top:10px; border-top:1px solid #FFECB3; color:#5a4a42;">
        Thank you for shopping with us!<br>
        <strong style="color:#C17900; font-weight:600;">The Java Florit Team</strong>
    </p>
</div>
